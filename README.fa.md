[read in english ](README.md)
<div dir='ltr'>
# معرفی دیجیکالا
دیجی‌کالا یک فروشگاه آنلاین برجسته در ایران است که با تنوع گسترده‌ای از محصولات و خدمات شناخته می‌شود. این فروشگاه در ابتدا بر روی فروش لوازم الکترونیکی و دیجیتال تمرکز داشت، اما طی 15 سال گذشته به یک پلتفرم جامع تجارت الکترونیک با ارائه‌ی دسته‌بندی‌های متنوع محصولات تبدیل شده است. این گسترش، دیجی‌کالا را به یکی از پلتفرم‌های پیشرو تجارت الکترونیک در خاورمیانه تبدیل کرده است.

دیجی‌کالا به یک اکوسیستم کامل از کسب‌وکارهای آنلاین تبدیل شده است که فقط به تجارت الکترونیک محدود نمی‌شود. تمرکز این گروه بر روی تکمیل زنجیره‌ی ارزش اقتصاد دیجیتال ایران بوده است و زیرساخت‌های لازم برای انواع مختلف کسب‌وکارها را فراهم کرده است. فعالیت‌های آن‌ها شامل حوزه‌هایی مانند تولید محتوا، لجستیک، فناوری مالی، فناوری بازاریابی و فناوری ابری است. با دسترسی گسترده و خدمات جامع خود، دیجی‌کالا به جمعیت و نیازهای متنوع مشتریان خود پاسخ می‌دهد.

## آمار و دستاوردهای کلیدی دیجی‌کالا شامل موارد زیر است:

 * بیش از 41.5 میلیون کاربر فعال ماهانه.

 * دارای بیش از 9.7 میلیون SKU (واحد نگهداری موجودی).

 * همکاری با بیش از 308,000 فروشنده.

 * حضور قابل توجه در لجستیک و توزیع با بیش از 530 مرکز زیرساخت.

 * ظرفیت برآورده‌سازی قوی، با توانایی رسیدگی به بیش از 904,000 سفارش روزانه.

 * تنوع محصولات در حال گسترش که سال گذشته 29٪ رشد داشته است.

 * زیرمجموعه‌ها و خدمات متنوع، از جمله فیدیبو (فروشگاه کتاب الکترونیکی)، دیجی‌استایل (فروشگاه آنلاین مد و پوشاک)، دیجی‌پی (متمرکز بر پرداخت‌های موبایلی و وب)، و پیندو (سکوی تبلیغات مصرف‌کننده به مصرف‌کننده).

موفقیت دیجی‌کالا تا حد زیادی به دلیل تعهد آن به تضمین تجربه خرید و فروش آنلاین مثبت است. این شرکت به طور منظم کیفیت محصولات و قیمت‌گذاری را نظارت می‌کند و به بازخوردها و گزارش‌های کاربران به صورت فعال پاسخ می‌دهد تا استانداردهای بالایی را حفظ کند.

معرفی پروژه
=======================
عنوان پروژه: خزنده وب دیجی‌کالا

معرفی پروژه:
پروژه خزنده وب دیجی‌کالا، یک سیستم جامع و انعطاف‌پذیر برای جمع‌آوری و تحلیل داده‌های فروشگاه آنلاین دیجی‌کالا است. این سیستم، که به زبان پایتون توسعه یافته، قادر است اطلاعات مربوط به فروشندگان و محصولات را از صفحات وب دیجی‌کالا استخراج کند. هدف اصلی این پروژه، فراهم کردن یک ابزار قدرتمند برای تحلیل رقابتی و تصمیم‌گیری‌های دقیق تجاری است.با این پروژه شما قادر به استخراج اطلاعات فروشندگان و محصولات خواهید بود و امکان ایجاد تاریخچه برای انها را خواهید داشت در صورت بروز تغییر در اطلاعات محصول و یا فروشنده اطلاعات قبلی در تیبل های تاریخچه ذخیره خواهند شد و امکان برسی انها را خواهید داشت 

ویژگی‌های اصلی:

 * `db_handler.py` : مدیریت پایگاه داده SQLite برای ذخیره‌سازی و دستکاری داده‌های جمع‌آوری شده. [بررسی جزئیات](archive\documents\functions.fa.md#db_handlerpy)

 * `driver_manager.py` : ساخت درایور و مدیریت کارای های مربوط به درایور [بررسی جزئیات](archive\documents\functions.fa.md#driver_managerpy)

 * `product_details_extractor.py` : فایل مربوط به استخراج اطلاعات صفحه محصول ات دیجی‌کالا و ارسال اطلاعات به db_handler.[بررسی جزئیات](archive\documents\functions.fa.md#product_details_extractorpy)

 * `seller_product_data_extractor.py` : فایل مربوط به استخراج اطلاعات صفحات دسته بندی و اطلاعات صفحات فروشندگان و ارسال اطلاعات به db_handler. [بررسی جزئیات](archive\documents\functions.fa.md#seller_product_data_extractorpy)
 
 * `webScriper.py` : فایلی برای ساخت یک شی از خزنده و استفاده از توابع استخراج  [بررسی جزئیات](archive\documents\functions.fa.md#webscriperpy)

 * `console_panel.py` : یک رابط کاربری متنی (CLI) که به کاربر امکان می‌دهد فرآیند خزنده را کنترل کند و داده‌ها را به فرمت CSV صادر کند. [بررسی جزئیات](archive\documents\functions.fa.md#console_panelpy)
 
 * `app.py` : یک رابط کاربری تحت وب با استفاده از flask (درحال توسعه) [بررسی جزئیات](archive\documents\functions.fa.md#apppy)
 
 * `logger.py` : سیستم ثبت وقایع برای ردیابی عملیات خزنده و اشکال‌زدایی. [بررسی جزئیات](archive\documents\functions.fa.md#loggerpy)
 
 * `TODOS.py` : فایلی برای سازمان دهی لیست های انجام و وباگ ها  [بررسی جزئیات](archive\documents\functions.fa.md#todospy)
  
کاربردها و مزایا:

این پروژه ابزاری قدرتمند برای تجار و تحلیلگران بازار است که به دنبال درک بهتری از بازار و رفتار رقبا هستند. با استفاده از این خزنده، کاربران می‌توانند به تحلیل قیمت‌ها، بررسی موجودی محصولات، و درک بهتر عملکرد فروشندگان دست پیدا کنند. این سیستم همچنین می‌تواند در شناسایی فرصت‌های جدید بازار و بهبود استراتژی‌های فروش موثر باشد.

استخراج اطلاعات فروشندگان و محصولات موجود انها 
استخراج اطلاعات محصولات و ذخیره داده ها در جدول موجودی های و تاریخچه ها
دریافت خروجی به صورت فایل csv 

روش راه اندازی پروژه
=======================
گام 1: نصب Python

اطمینان حاصل کنید که Python نسخه 3.x در سیستم شما نصب شده است. می‌توانید از دستور زیر برای بررسی نسخه Python استفاده کنید:

```bash
python --version
```
گام 2: کلون کردن مخزن پروژه

پروژه را از مخزن مربوطه کلون کنید :
```bash 
git clone https://github.com/rabbittx/Digikala-Crawler.git
cd 'Digikala-Crawler'
```
گام 3: ایجاد محیط مجازی

برای جلوگیری از تداخل بین کتابخانه‌ها، یک محیط مجازی ایجاد کنید:

```bash
python -m venv env

```
گام 4: فعال‌سازی محیط مجازی

محیط مجازی را فعال کنید:


در ویندوز : 
```bash 
venv\Scripts\activate

```
در macOS و Linux:
```bash
source venv/bin/activate

```
گام 5: نصب وابستگی‌ها

وابستگی‌های پروژه را با استفاده از فایل requirements.txt نصب کنید:

```bash
pip install -r requirements.txt

```

گام 6: تنظیم فایل محیطی (env)

نصب Geckodriver :
ابتدا برای مرورگر خود geckodriver  را در دانلود کنید 
[fireFox](https://github.com/mozilla/geckodriver/releases)
[chrome](https://chromedriver.chromium.org/downloads)
و در مسیر مورد نظر خود یا در کنار پروژه قرار دهید 
مسیر پیشنهادی در کنار پروژه 

- archive\gekcodrive\firefox\geckodriver.exe
- archive\gekcodrive\chorme\chromedriver.exe

گام 7: اجرای پروژه
برای استفاده از این پروژه میتوانید از پنل کنسول یا پنل وب استفاده کنید 

اسکریپت پنل را برای شروع پروژه اجرا کنید 
```bash
python console_panel.py
```
برا استفاده از رابط کاربری تحت وب  پنل وب را اجرا کنید 
```bash 
python app.py
```
گام 8 : استفاده از پروژه 

بعد از اجرای بار اول پروژه باید تنظیمات مورد نیاز را  اضافه کنید. 
برای این کار بعد از اجرا مسیر درایور وب خود و مسیر دیتابیس خود را قرار دهید (دیتابیس به صورت اتوماتیک ساخته می شود و شما فقط بیاد ادرسی برای ذخیره سازی ان را وارد کنید)
 - مسیر پشنهادی برای دیتابیس 
 - archive\dataBase\digikala_database.db
  
همچنین باید مشخص کنید از  کدام مرورگر استفاده میکنید فایر فاکس یا کروم 
و سپس پروژه اماده استفاده است.
از منوی نمایش داده شده گذینه مورد نظر خود را انتخاب کنید همچنین میتوانید انتخاب کنید که ایا میخواید مرورگر به صورت کار در بک گراند باز شود یا به صورت نرمال اجرا شود 
بعد از استخراج اطلاعات مورد نیاز خود میتوانید با استفاده از منوی خورجی گرفتن اطلاعات مورد نیاز خود را در فایل سی اس وی دریافت کنید 

نکته  
===========
- ورژن وب درایور باید با ورژن مرورگر شما  مطابق باشد در غیر این صورت با خطا مواجه می شوید 
- برای جلو گیری از افزایش بار اضافه بر روی سرور های دیجی کلا زمان بندی های در نظر گرفته شده است الطفا انها را حذف نکنید یا کاهش ندهید 
- لطفا از اجرای هم زمان چند اسکریپت برای سرعت بخشیدن به استخراج خود خوداری کنید 


## ذخیره سازی اطلاعات 
برای ذخیره سازی اطلاعات استخراج شده توسط این پروژه از sqlite3 استفاده می شود 
دیتابیس ساخته شده در این پروژه شامل ۳ تبل می باشد که اطلاعات را در حالت های مخطلف استخراج ذخیره سازی میکند 
# tables 
 - sellers : `id`,`seller_id`,`crawl_date`,`seller_name`,`membership_period`,`satisfaction_with_goods`,`seller_performance`,`people_have_given_points`,`timely_supply`,`obligation_to_send`,`no_return`,`introduction_of_the_seller`
  
 - products : `id`,`product_id`,`seller_id`,`crawl_date`,`seller_name`,`product_link`,`product_image`,`product_rate`,`product_name`,`product_price`,`product_price_discount_percent`,`product_price_discount`,`product_special_sale`,`stock`
  
 - products_extraction :`id`,`crawl_date`,`product_id`,`seller_id`,`seller_name`,`categories`,`product_link`,`product_title`,`product_main_title`,`user_review`,`insurer`,`Insurance_discount_percent`,`Insurance_price_before_discount`,`Insurance_final_price`,`Other_sellers_for_this_product`,`satisfaction_with_the_product`,`warranty`,`digiclub_points`,`discount_percent`,`price_before_discount`,`final_price`,`product_stock`,`product_image`,`other_seller{other seller info}`,`similar_products{products info}`,`related_videos`,`introduction_box`,`expert_check`,`specifications_box`,`reviews`,`question_box`,`also_bought_items{product info}`,`seller_offer`
  
همچنین در این پروژه تغییرات اطلاعات فروشندگان محصولاتشان و یا جزعیات محصول در نظر گرفته شده است و زمانی که فیلدی در دیتابیس موجود باشد و اطلاعات استخراج شده جدید تفاوت داشته باشد اطلاعات موجود در دیتابیس به تیبل های تاریخچه منتقل و اطلاعات استخراج شده جدید جایگزین انها می شود 
# historcial tables 
 - sellers_history : فیلد های قبلی + ایدی تاریخچه
 - products_history : فیلد های قبلی + ایدی تاریخچه
 - products_extraction_history : فیلد های قبلی + ایدی تاریخچه


## آینده پروژه

### قابلیت‌های برنامه

- [ ] افزودن ویژگی یکپارچه‌سازی با مرورگرهای دیگر
- [ ] اضافه کردن ویژگی نمایش خروجی در فرمت‌های مختلف
- [ ] ایجاد واحد تست برای بخش‌های مختلف
- [ ] افزودن api  برای استفاده از کامپوننت‌های اصلی در برنامه‌های دیگر
- [ ] رابط کاربری تحت وب با استفاده از flask
  
### بهبودهای عملکردی

- [ ] بهینه‌سازی مصرف حافظه
- [ ] بهبود عملکرد اجرای پروژه بر روی سیستم‌های مختلف
- [ ] افزایش سرعت و کارایی الگوریتم‌ها

### توسعه کاربری

- [ ] افزایش امکانات و گزینه‌های تنظیمات در پنل
- [ ] ایجاد رابط گرافیکی کاربری برای تعامل راحت‌تر
- [ ] افزودن ناوبری و راهنمایی به راهنمای کاربر

### امنیت و پایداری

- [ ] بررسی و بهبود امنیت در خصوص ورودی‌های کاربر
- [ ] اضافه کردن مدیریت خطاها و گزارش‌های بهتر
- [ ] تست و اصلاح باگ‌های موجود

</div>
